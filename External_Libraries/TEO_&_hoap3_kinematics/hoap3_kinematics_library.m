function h = hoap3_kinematics_library ()
h.w_T_RF = @w_T_RF;
h.w_J_RF = @w_J_RF;
h.RF_T_w = @RF_T_w;
h.RF_J_w = @RF_J_w;
h.w_T_LF = @w_T_LF;
h.w_J_LF = @w_J_LF;
h.LF_T_w = @LF_T_w;
h.LF_J_w = @LF_J_w;
h.w_T_CoM = @w_T_CoM;
h.w_J_CoM = @w_J_CoM;
h.CoM_T_RH = @CoM_T_RH;
h.CoM_J_RH = @CoM_J_RH;
h.CoM_T_LH = @CoM_T_LH;
h.CoM_J_LH = @CoM_J_LH;
h.RF_T_CoM = @RF_T_CoM;
h.RF_J_CoM = @RF_J_CoM;
h.LF_T_CoM = @LF_T_CoM;
h.LF_J_CoM = @LF_J_CoM;
h.CoM_T_RF = @CoM_T_RF;
h.CoM_T_LF = @CoM_T_LF;
end
function pose = w_T_RF (q)
pose=[	- (21.*cos(q(1,:)).*sin(q(3,:)))./200 - (21.*cos(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:))))./200 - (21.*sin(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:))))./200 - (cos(q(6,:)).*(cos(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) + sin(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:))))))./25 - (21.*cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:)))./200 - (cos(q(2,:)).*sin(q(1,:)).*sin(q(6,:)))./25;
		(21.*cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:)))./200 - (21.*cos(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))))./200 - (21.*sin(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:))))./200 - (cos(q(6,:)).*(cos(q(5,:)).*(cos(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) + sin(q(5,:)).*(cos(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))))))./25 - (21.*sin(q(1,:)).*sin(q(3,:)))./200 + (cos(q(1,:)).*cos(q(2,:)).*sin(q(6,:)))./25 - 39./1000;
		(sin(q(2,:)).*sin(q(6,:)))./25 - (21.*cos(q(2,:)).*(cos(q(3,:) + q(4,:)) + cos(q(3,:))))./200 - (cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:)))./25;
		(cos(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:)))) - sin(q(2,:)).*sin(q(6,:)) - sin(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) + sin(q(6,:)).*(cos(q(5,:)).*(cos(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) + sin(q(5,:)).*(cos(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))))) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:)) + cos(q(1,:)).*cos(q(2,:)).*cos(q(6,:)) + 1).^(1./2)./2;
		1./2.*sign(cos(q(6,:)).*sin(q(2,:)) - cos(q(6,:)).*(cos(q(5,:)).*(cos(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) + sin(q(5,:)).*(cos(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))))) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:)) + cos(q(1,:)).*cos(q(2,:)).*sin(q(6,:))).*(cos(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:)))) + sin(q(2,:)).*sin(q(6,:)) - sin(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) - sin(q(6,:)).*(cos(q(5,:)).*(cos(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) + sin(q(5,:)).*(cos(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))))) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:)) - cos(q(1,:)).*cos(q(2,:)).*cos(q(6,:)) + 1).^(1./2);
		1./2.*sign(sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)) + cos(q(6,:)).*(cos(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) + sin(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:))))) + cos(q(2,:)).*sin(q(1,:)).*sin(q(6,:))).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:)))) + sin(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) + sin(q(6,:)).*(cos(q(5,:)).*(cos(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) + sin(q(5,:)).*(cos(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))))) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:)) + cos(q(1,:)).*cos(q(2,:)).*cos(q(6,:)) + 1).^(1./2);
		1./2.*sign(cos(q(5,:)).*(cos(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:)))) - sin(q(5,:)).*(cos(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) - sin(q(6,:)).*(cos(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) + sin(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:))))) + cos(q(2,:)).*cos(q(6,:)).*sin(q(1,:))).*(sin(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) - sin(q(2,:)).*sin(q(6,:)) - cos(q(5,:)).*(cos(q(4,:)).*(cos(q(1,:)).*cos(q(3,:)) - sin(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(cos(q(1,:)).*sin(q(3,:)) + cos(q(3,:)).*sin(q(1,:)).*sin(q(2,:)))) - sin(q(6,:)).*(cos(q(5,:)).*(cos(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))) + sin(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:)))) + sin(q(5,:)).*(cos(q(4,:)).*(cos(q(3,:)).*sin(q(1,:)) + cos(q(1,:)).*sin(q(2,:)).*sin(q(3,:))) - sin(q(4,:)).*(sin(q(1,:)).*sin(q(3,:)) - cos(q(1,:)).*cos(q(3,:)).*sin(q(2,:))))) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:)) - cos(q(1,:)).*cos(q(2,:)).*cos(q(6,:)) + 1).^(1./2)];
end
function M = w_J_RF(in1)
%W_J_RF
%    M = W_J_RF(IN1)

%    This function was generated by the Symbolic Math Toolbox version 5.9.
%    06-May-2013 12:35:39

theta01 = in1(1,:);
theta02 = in1(2,:);
theta03 = in1(3,:);
theta04 = in1(4,:);
theta05 = in1(5,:);
theta06 = in1(6,:);
t2 = sin(theta01);
t3 = sin(theta03);
t4 = cos(theta03);
t5 = cos(theta01);
t6 = sin(theta02);
t7 = cos(theta04);
t8 = t2.*t3;
t14 = t4.*t5.*t6;
t9 = t8-t14;
t10 = sin(theta04);
t11 = t2.*t4;
t12 = t3.*t5.*t6;
t13 = t11+t12;
t15 = cos(theta02);
t16 = sin(theta06);
t17 = cos(theta06);
t18 = t2.*t3.*(2.1e1./2.0e2);
t19 = t7.*t9.*(2.1e1./2.0e2);
t20 = t10.*t13.*(2.1e1./2.0e2);
t21 = cos(theta05);
t22 = t7.*t9;
t23 = t10.*t13;
t24 = t22+t23;
t25 = sin(theta05);
t26 = t9.*t10;
t40 = t7.*t13;
t27 = t26-t40;
t39 = t21.*t24;
t41 = t25.*t27;
t28 = t39-t41;
t29 = t17.*t28.*(1.0./2.5e1);
t42 = t5.*t15.*t16.*(1.0./2.5e1);
t30 = t18+t19+t20+t29-t42-t4.*t5.*t6.*(2.1e1./2.0e2);
t31 = theta03+theta04;
t32 = cos(t31);
t33 = t4+t32;
t34 = t15.*t33.*(2.1e1./2.0e2);
t35 = theta03+theta04+theta05;
t36 = cos(t35);
t37 = t15.*t17.*t36.*(1.0./2.5e1);
t43 = t6.*t16.*(1.0./2.5e1);
t38 = t34+t37-t43;
t44 = t3.*t5;
t45 = t2.*t4.*t6;
t46 = t44+t45;
t47 = t4.*t5;
t49 = t2.*t3.*t6;
t48 = t47-t49;
t50 = t7.*t46;
t51 = t10.*t48;
t52 = t50+t51;
t53 = t21.*t52;
t54 = t7.*t48;
t60 = t10.*t46;
t55 = t54-t60;
t56 = t25.*t55;
t57 = t53+t56;
t58 = t7.*t46.*(2.1e1./2.0e2);
t59 = t10.*t48.*(2.1e1./2.0e2);
t61 = t17.*t57.*(1.0./2.5e1);
t62 = t2.*t15.*t16.*(1.0./2.5e1);
t63 = t34+t37-t43-t4.*t15.*(2.1e1./2.0e2);
t64 = sin(t35);
t65 = t4.*t10.*t15.*(2.1e1./2.0e2);
t66 = t3.*t7.*t15.*(2.1e1./2.0e2);
t67 = t4.*t7.*t15.*t17.*t25.*(1.0./2.5e1);
t68 = t4.*t10.*t15.*t17.*t21.*(1.0./2.5e1);
t69 = t3.*t7.*t15.*t17.*t21.*(1.0./2.5e1);
t70 = t21.*t55;
t71 = t70-t25.*t52;
t72 = t5.*t15;
t73 = t21.*t27;
t74 = t24.*t25;
M = reshape([t30,t3.*t5.*(-2.1e1./2.0e2)-t7.*t46.*(2.1e1./2.0e2)-t10.*t48.*(2.1e1./2.0e2)-t17.*t57.*(1.0./2.5e1)-t2.*t4.*t6.*(2.1e1./2.0e2)-t2.*t15.*t16.*(1.0./2.5e1),0.0,0.0,0.0,1.0,-t2.*t38,t5.*t38,t4.*t6.*(2.1e1./2.0e2)+t15.*t16.*(1.0./2.5e1)+t4.*t6.*t7.*(2.1e1./2.0e2)-t3.*t6.*t10.*(2.1e1./2.0e2)+t4.*t6.*t7.*t17.*t21.*(1.0./2.5e1)-t3.*t6.*t10.*t17.*t21.*(1.0./2.5e1)-t3.*t6.*t7.*t17.*t25.*(1.0./2.5e1)-t4.*t6.*t10.*t17.*t25.*(1.0./2.5e1),t5,t2,0.0,t6.*t30-t5.*t15.*t38,-t6.*(t58+t59+t61+t62+t3.*t5.*(2.1e1./2.0e2)+t2.*t4.*t6.*(2.1e1./2.0e2))-t2.*t15.*t38,t65+t66+t67+t68+t69+t3.*t15.*(2.1e1./2.0e2)-t3.*t10.*t15.*t17.*t25.*(1.0./2.5e1),-t2.*t15,t72,t6,t6.*(t19+t20+t29-t42)-t5.*t15.*t63,-t6.*(t58+t59+t61+t62)-t2.*t15.*t63,t65+t66+t67+t68+t69-t3.*t10.*t15.*t17.*t25.*(1.0./2.5e1),-t2.*t15,t72,t6,t4.*t5.*t7.*t17.*t21.*(-1.0./2.5e1)+t3.*t5.*t10.*t17.*t21.*(1.0./2.5e1)+t3.*t5.*t7.*t17.*t25.*(1.0./2.5e1)+t4.*t5.*t10.*t17.*t25.*(1.0./2.5e1)+t2.*t3.*t6.*t7.*t17.*t21.*(1.0./2.5e1)+t2.*t4.*t6.*t10.*t17.*t21.*(1.0./2.5e1)+t2.*t4.*t6.*t7.*t17.*t25.*(1.0./2.5e1)-t2.*t3.*t6.*t10.*t17.*t25.*(1.0./2.5e1),t2.*t4.*t7.*t17.*t21.*(-1.0./2.5e1)+t2.*t3.*t10.*t17.*t21.*(1.0./2.5e1)+t2.*t3.*t7.*t17.*t25.*(1.0./2.5e1)+t2.*t4.*t10.*t17.*t25.*(1.0./2.5e1)-t3.*t5.*t6.*t7.*t17.*t21.*(1.0./2.5e1)-t4.*t5.*t6.*t10.*t17.*t21.*(1.0./2.5e1)-t4.*t5.*t6.*t7.*t17.*t25.*(1.0./2.5e1)+t3.*t5.*t6.*t10.*t17.*t25.*(1.0./2.5e1),t15.*t17.*(t3.*t7.*t21+t4.*t10.*t21+t4.*t7.*t25-t3.*t10.*t25).*(1.0./2.5e1),-t2.*t15,t72,t6,(t73+t74).*(t37-t43)-t15.*t64.*(t29-t42),t71.*(t37-t43)+t15.*t64.*(t61+t62),t6.*t17.*(1.0./2.5e1)+t4.*t7.*t15.*t16.*t21.*(1.0./2.5e1)-t3.*t10.*t15.*t16.*t21.*(1.0./2.5e1)-t3.*t7.*t15.*t16.*t25.*(1.0./2.5e1)-t4.*t10.*t15.*t16.*t25.*(1.0./2.5e1),t71,-t73-t74,-t15.*t64],[6, 6]);

end
function pose = RF_T_w (q)
pose=[	(39.*cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)))./1000 - (21.*sin(q(5,:)))./200 - (21.*sin(q(4,:) + q(5,:)))./200 + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(2,:)))./1000;
		sin(q(6,:)).*((21.*cos(q(4,:) + q(5,:)))./200 + (21.*cos(q(5,:)))./200) + (39.*cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))))./1000 + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)))./1000;
		(21.*cos(q(6,:)).*(cos(q(4,:) + q(5,:)) + cos(q(5,:))))./200 - (39.*cos(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))))./1000 + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(1,:)))./1000 + 1./25;
		(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(2,:)).*sin(q(6,:)) + cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:)) + sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2)./2;
		1./2.*sign(sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(1,:)) - cos(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:)) - cos(q(6,:)).*sin(q(2,:))).*(sin(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2);
		1./2.*sign(- sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) + cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:)) + sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:)) + sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2);
		1./2.*sign(sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(2,:)) - sin(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:)))).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(2,:)).*sin(q(6,:)) + sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2)];
end
function M = RF_J_w(in1)
%RF_J_W
%    M = RF_J_W(IN1)

%    This function was generated by the Symbolic Math Toolbox version 5.9.
%    06-May-2013 12:35:40

theta01 = in1(1,:);
theta02 = in1(2,:);
theta03 = in1(3,:);
theta04 = in1(4,:);
theta05 = in1(5,:);
theta06 = in1(6,:);
t2 = theta03+theta04+theta05;
t3 = sin(t2);
t4 = cos(theta01);
t5 = sin(theta01);
t6 = cos(t2);
t7 = sin(theta02);
t8 = t4.*t6.*t7.*(3.9e1./1.0e3);
t9 = theta04+theta05;
t10 = cos(t9);
t11 = cos(theta02);
t12 = sin(theta06);
t13 = cos(theta06);
t14 = t5.*t6.*(3.9e1./1.0e3);
t15 = t3.*t4.*t7.*(3.9e1./1.0e3);
t16 = sin(t9);
t17 = cos(theta05);
t18 = t14+t15;
t20 = t16.*(2.1e1./2.0e2);
t19 = t14+t15-t20;
t21 = sin(theta05);
t22 = t7.*t13;
t23 = t6.*t11.*t12;
t24 = t7.*t12;
t25 = t24-t6.*t11.*t13;
M = reshape([t4.*t6.*(3.9e1./1.0e3)-t3.*t5.*t7.*(3.9e1./1.0e3),t3.*t4.*t12.*(3.9e1./1.0e3)-t5.*t11.*t13.*(3.9e1./1.0e3)+t5.*t6.*t7.*t12.*(3.9e1./1.0e3),t3.*t4.*t13.*(3.9e1./1.0e3)+t5.*t11.*t12.*(3.9e1./1.0e3)+t5.*t6.*t7.*t13.*(3.9e1./1.0e3),t3.*t11,-t22-t23,t25,t3.*t4.*t11.*(3.9e1./1.0e3),t4.*(t22+t23).*(-3.9e1./1.0e3),t4.*t25.*(3.9e1./1.0e3),-t6,-t3.*t12,-t3.*t13,t8-t3.*t5.*(3.9e1./1.0e3),t12.*t18,t13.*t18,0.0,-t13,t12,t8-t10.*(2.1e1./2.0e2)-t3.*t5.*(3.9e1./1.0e3),t12.*t19,t13.*t19,0.0,-t13,t12,t8-t10.*(2.1e1./2.0e2)-t17.*(2.1e1./2.0e2)-t3.*t5.*(3.9e1./1.0e3),t12.*(t14+t15-t16.*(2.1e1./2.0e2)-t21.*(2.1e1./2.0e2)),t13.*(t14+t15-t20-t21.*(2.1e1./2.0e2)),0.0,-t13,t12,0.0,t13.*(t10+t17).*(2.1e1./2.0e2)-t4.*(t11.*t12+t6.*t7.*t13).*(3.9e1./1.0e3)+t3.*t5.*t13.*(3.9e1./1.0e3),t4.*(t11.*t13-t6.*t7.*t12).*(-3.9e1./1.0e3)-t12.*(t10.*(2.1e1./2.0e2)+t17.*(2.1e1./2.0e2))-t3.*t5.*t12.*(3.9e1./1.0e3),-1.0,0.0,0.0],[6, 6]);

end
function pose = w_T_LF (q)
pose=[	- (21.*cos(q(7,:)).*sin(q(9,:)))./200 - (21.*cos(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:))))./200 - (21.*sin(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:))))./200 - (cos(q(12,:)).*(cos(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) + sin(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:))))))./25 - (21.*cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:)))./200 - (cos(q(8,:)).*sin(q(7,:)).*sin(q(12,:)))./25;
		(21.*cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:)))./200 - (21.*cos(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))))./200 - (21.*sin(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:))))./200 - (cos(q(12,:)).*(cos(q(11,:)).*(cos(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) + sin(q(11,:)).*(cos(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))))))./25 - (21.*sin(q(7,:)).*sin(q(9,:)))./200 + (cos(q(7,:)).*cos(q(8,:)).*sin(q(12,:)))./25 + 39./1000;
		(sin(q(8,:)).*sin(q(12,:)))./25 - (21.*cos(q(8,:)).*(cos(q(9,:) + q(10,:)) + cos(q(9,:))))./200 - (cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:)))./25;
		(cos(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:)))) - sin(q(8,:)).*sin(q(12,:)) - sin(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) + sin(q(12,:)).*(cos(q(11,:)).*(cos(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) + sin(q(11,:)).*(cos(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))))) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:)) + cos(q(7,:)).*cos(q(8,:)).*cos(q(12,:)) + 1).^(1./2)./2;
		1./2.*sign(cos(q(12,:)).*sin(q(8,:)) - cos(q(12,:)).*(cos(q(11,:)).*(cos(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) + sin(q(11,:)).*(cos(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))))) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:)) + cos(q(7,:)).*cos(q(8,:)).*sin(q(12,:))).*(cos(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:)))) + sin(q(8,:)).*sin(q(12,:)) - sin(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) - sin(q(12,:)).*(cos(q(11,:)).*(cos(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) + sin(q(11,:)).*(cos(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))))) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:)) - cos(q(7,:)).*cos(q(8,:)).*cos(q(12,:)) + 1).^(1./2);
		1./2.*sign(sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)) + cos(q(12,:)).*(cos(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) + sin(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:))))) + cos(q(8,:)).*sin(q(7,:)).*sin(q(12,:))).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:)))) + sin(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) + sin(q(12,:)).*(cos(q(11,:)).*(cos(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) + sin(q(11,:)).*(cos(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))))) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:)) + cos(q(7,:)).*cos(q(8,:)).*cos(q(12,:)) + 1).^(1./2);
		1./2.*sign(cos(q(11,:)).*(cos(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:)))) - sin(q(11,:)).*(cos(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) - sin(q(12,:)).*(cos(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) + sin(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:))))) + cos(q(8,:)).*cos(q(12,:)).*sin(q(7,:))).*(sin(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) - sin(q(8,:)).*sin(q(12,:)) - cos(q(11,:)).*(cos(q(10,:)).*(cos(q(7,:)).*cos(q(9,:)) - sin(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(cos(q(7,:)).*sin(q(9,:)) + cos(q(9,:)).*sin(q(7,:)).*sin(q(8,:)))) - sin(q(12,:)).*(cos(q(11,:)).*(cos(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))) + sin(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:)))) + sin(q(11,:)).*(cos(q(10,:)).*(cos(q(9,:)).*sin(q(7,:)) + cos(q(7,:)).*sin(q(8,:)).*sin(q(9,:))) - sin(q(10,:)).*(sin(q(7,:)).*sin(q(9,:)) - cos(q(7,:)).*cos(q(9,:)).*sin(q(8,:))))) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:)) - cos(q(7,:)).*cos(q(8,:)).*cos(q(12,:)) + 1).^(1./2)];
end
function M = w_J_LF(in1)
%W_J_LF
%    M = W_J_LF(IN1)

%    This function was generated by the Symbolic Math Toolbox version 5.9.
%    06-May-2013 12:35:41

theta07 = in1(7,:);
theta08 = in1(8,:);
theta09 = in1(9,:);
theta10 = in1(10,:);
theta11 = in1(11,:);
theta12 = in1(12,:);
t2 = sin(theta07);
t3 = sin(theta09);
t4 = cos(theta09);
t5 = cos(theta07);
t6 = sin(theta08);
t7 = cos(theta10);
t8 = t2.*t3;
t14 = t4.*t5.*t6;
t9 = t8-t14;
t10 = sin(theta10);
t11 = t2.*t4;
t12 = t3.*t5.*t6;
t13 = t11+t12;
t15 = cos(theta08);
t16 = sin(theta12);
t17 = cos(theta12);
t18 = t2.*t3.*(2.1e1./2.0e2);
t19 = t7.*t9.*(2.1e1./2.0e2);
t20 = t10.*t13.*(2.1e1./2.0e2);
t21 = cos(theta11);
t22 = t7.*t9;
t23 = t10.*t13;
t24 = t22+t23;
t25 = sin(theta11);
t26 = t9.*t10;
t40 = t7.*t13;
t27 = t26-t40;
t39 = t21.*t24;
t41 = t25.*t27;
t28 = t39-t41;
t29 = t17.*t28.*(1.0./2.5e1);
t42 = t5.*t15.*t16.*(1.0./2.5e1);
t30 = t18+t19+t20+t29-t42-t4.*t5.*t6.*(2.1e1./2.0e2);
t31 = theta09+theta10;
t32 = cos(t31);
t33 = t4+t32;
t34 = t15.*t33.*(2.1e1./2.0e2);
t35 = theta09+theta10+theta11;
t36 = cos(t35);
t37 = t15.*t17.*t36.*(1.0./2.5e1);
t43 = t6.*t16.*(1.0./2.5e1);
t38 = t34+t37-t43;
t44 = t3.*t5;
t45 = t2.*t4.*t6;
t46 = t44+t45;
t47 = t4.*t5;
t49 = t2.*t3.*t6;
t48 = t47-t49;
t50 = t7.*t46;
t51 = t10.*t48;
t52 = t50+t51;
t53 = t21.*t52;
t54 = t7.*t48;
t60 = t10.*t46;
t55 = t54-t60;
t56 = t25.*t55;
t57 = t53+t56;
t58 = t7.*t46.*(2.1e1./2.0e2);
t59 = t10.*t48.*(2.1e1./2.0e2);
t61 = t17.*t57.*(1.0./2.5e1);
t62 = t2.*t15.*t16.*(1.0./2.5e1);
t63 = t34+t37-t43-t4.*t15.*(2.1e1./2.0e2);
t64 = sin(t35);
t65 = t4.*t10.*t15.*(2.1e1./2.0e2);
t66 = t3.*t7.*t15.*(2.1e1./2.0e2);
t67 = t4.*t7.*t15.*t17.*t25.*(1.0./2.5e1);
t68 = t4.*t10.*t15.*t17.*t21.*(1.0./2.5e1);
t69 = t3.*t7.*t15.*t17.*t21.*(1.0./2.5e1);
t70 = t21.*t55;
t71 = t70-t25.*t52;
t72 = t5.*t15;
t73 = t21.*t27;
t74 = t24.*t25;
M = reshape([t30,t3.*t5.*(-2.1e1./2.0e2)-t7.*t46.*(2.1e1./2.0e2)-t10.*t48.*(2.1e1./2.0e2)-t17.*t57.*(1.0./2.5e1)-t2.*t4.*t6.*(2.1e1./2.0e2)-t2.*t15.*t16.*(1.0./2.5e1),0.0,0.0,0.0,1.0,-t2.*t38,t5.*t38,t4.*t6.*(2.1e1./2.0e2)+t15.*t16.*(1.0./2.5e1)+t4.*t6.*t7.*(2.1e1./2.0e2)-t3.*t6.*t10.*(2.1e1./2.0e2)+t4.*t6.*t7.*t17.*t21.*(1.0./2.5e1)-t3.*t6.*t10.*t17.*t21.*(1.0./2.5e1)-t3.*t6.*t7.*t17.*t25.*(1.0./2.5e1)-t4.*t6.*t10.*t17.*t25.*(1.0./2.5e1),t5,t2,0.0,t6.*t30-t5.*t15.*t38,-t6.*(t58+t59+t61+t62+t3.*t5.*(2.1e1./2.0e2)+t2.*t4.*t6.*(2.1e1./2.0e2))-t2.*t15.*t38,t65+t66+t67+t68+t69+t3.*t15.*(2.1e1./2.0e2)-t3.*t10.*t15.*t17.*t25.*(1.0./2.5e1),-t2.*t15,t72,t6,t6.*(t19+t20+t29-t42)-t5.*t15.*t63,-t6.*(t58+t59+t61+t62)-t2.*t15.*t63,t65+t66+t67+t68+t69-t3.*t10.*t15.*t17.*t25.*(1.0./2.5e1),-t2.*t15,t72,t6,t4.*t5.*t7.*t17.*t21.*(-1.0./2.5e1)+t3.*t5.*t10.*t17.*t21.*(1.0./2.5e1)+t3.*t5.*t7.*t17.*t25.*(1.0./2.5e1)+t4.*t5.*t10.*t17.*t25.*(1.0./2.5e1)+t2.*t3.*t6.*t7.*t17.*t21.*(1.0./2.5e1)+t2.*t4.*t6.*t10.*t17.*t21.*(1.0./2.5e1)+t2.*t4.*t6.*t7.*t17.*t25.*(1.0./2.5e1)-t2.*t3.*t6.*t10.*t17.*t25.*(1.0./2.5e1),t2.*t4.*t7.*t17.*t21.*(-1.0./2.5e1)+t2.*t3.*t10.*t17.*t21.*(1.0./2.5e1)+t2.*t3.*t7.*t17.*t25.*(1.0./2.5e1)+t2.*t4.*t10.*t17.*t25.*(1.0./2.5e1)-t3.*t5.*t6.*t7.*t17.*t21.*(1.0./2.5e1)-t4.*t5.*t6.*t10.*t17.*t21.*(1.0./2.5e1)-t4.*t5.*t6.*t7.*t17.*t25.*(1.0./2.5e1)+t3.*t5.*t6.*t10.*t17.*t25.*(1.0./2.5e1),t15.*t17.*(t3.*t7.*t21+t4.*t10.*t21+t4.*t7.*t25-t3.*t10.*t25).*(1.0./2.5e1),-t2.*t15,t72,t6,(t73+t74).*(t37-t43)-t15.*t64.*(t29-t42),t71.*(t37-t43)+t15.*t64.*(t61+t62),t6.*t17.*(1.0./2.5e1)+t4.*t7.*t15.*t16.*t21.*(1.0./2.5e1)-t3.*t10.*t15.*t16.*t21.*(1.0./2.5e1)-t3.*t7.*t15.*t16.*t25.*(1.0./2.5e1)-t4.*t10.*t15.*t16.*t25.*(1.0./2.5e1),t71,-t73-t74,-t15.*t64],[6, 6]);

end
function pose = LF_T_w (q)
pose=[	- (21.*sin(q(10,:) + q(11,:)))./200 - (21.*sin(q(11,:)))./200 - (39.*cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)))./1000 - (39.*sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(8,:)))./1000;
		sin(q(12,:)).*((21.*cos(q(10,:) + q(11,:)))./200 + (21.*cos(q(11,:)))./200) - (39.*cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))))./1000 - (39.*sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)))./1000;
		(21.*cos(q(12,:)).*(cos(q(10,:) + q(11,:)) + cos(q(11,:))))./200 + (39.*cos(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))))./1000 - (39.*sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(7,:)))./1000 + 1./25;
		(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(8,:)).*sin(q(12,:)) + cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:)) + sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2)./2;
		1./2.*sign(sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(7,:)) - cos(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:)) - cos(q(12,:)).*sin(q(8,:))).*(sin(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2);
		1./2.*sign(- sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) + cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:)) + sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:)) + sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2);
		1./2.*sign(sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(8,:)) - sin(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:)))).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(8,:)).*sin(q(12,:)) + sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2)];
end
function M = LF_J_w(in1)
%LF_J_W
%    M = LF_J_W(IN1)

%    This function was generated by the Symbolic Math Toolbox version 5.9.
%    06-May-2013 12:35:42

theta07 = in1(7,:);
theta08 = in1(8,:);
theta09 = in1(9,:);
theta10 = in1(10,:);
theta11 = in1(11,:);
theta12 = in1(12,:);
t2 = theta09+theta10+theta11;
t3 = sin(t2);
t4 = cos(theta07);
t5 = sin(theta07);
t6 = cos(t2);
t7 = sin(theta08);
t8 = t3.*t5.*(3.9e1./1.0e3);
t9 = theta10+theta11;
t10 = cos(t9);
t11 = cos(theta08);
t12 = sin(theta12);
t13 = cos(theta12);
t14 = t5.*t6.*(3.9e1./1.0e3);
t15 = t3.*t4.*t7.*(3.9e1./1.0e3);
t16 = sin(t9);
t17 = t16.*(2.1e1./2.0e2);
t18 = cos(theta11);
t19 = t14+t15;
t20 = t14+t15+t17;
t21 = sin(theta11);
t22 = t21.*(2.1e1./2.0e2);
t23 = t14+t15+t17+t22;
t24 = t7.*t13;
t25 = t6.*t11.*t12;
t26 = t7.*t12;
t27 = t26-t6.*t11.*t13;
M = reshape([t4.*t6.*(-3.9e1./1.0e3)+t3.*t5.*t7.*(3.9e1./1.0e3),t3.*t4.*t12.*(-3.9e1./1.0e3)+t5.*t11.*t13.*(3.9e1./1.0e3)-t5.*t6.*t7.*t12.*(3.9e1./1.0e3),t3.*t4.*t13.*(-3.9e1./1.0e3)-t5.*t11.*t12.*(3.9e1./1.0e3)-t5.*t6.*t7.*t13.*(3.9e1./1.0e3),t3.*t11,-t24-t25,t27,t3.*t4.*t11.*(-3.9e1./1.0e3),t4.*(t24+t25).*(3.9e1./1.0e3),t4.*t27.*(-3.9e1./1.0e3),-t6,-t3.*t12,-t3.*t13,t8-t4.*t6.*t7.*(3.9e1./1.0e3),-t12.*t19,-t13.*t19,0.0,-t13,t12,t8-t10.*(2.1e1./2.0e2)-t4.*t6.*t7.*(3.9e1./1.0e3),-t12.*t20,-t13.*t20,0.0,-t13,t12,t8-t10.*(2.1e1./2.0e2)-t18.*(2.1e1./2.0e2)-t4.*t6.*t7.*(3.9e1./1.0e3),-t12.*t23,-t13.*t23,0.0,-t13,t12,0.0,t13.*(t10+t18).*(2.1e1./2.0e2)+t4.*(t11.*t12+t6.*t7.*t13).*(3.9e1./1.0e3)-t3.*t5.*t13.*(3.9e1./1.0e3),t4.*(t11.*t13-t6.*t7.*t12).*(3.9e1./1.0e3)-t12.*(t10.*(2.1e1./2.0e2)+t18.*(2.1e1./2.0e2))+t3.*t5.*t12.*(3.9e1./1.0e3),-1.0,0.0,0.0],[6, 6]);

end
function pose = w_T_CoM (q)
pose=[	(7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200;
		0;
		(7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200;
		(2.^(1./2).*(cos(q(13,:)) + 1).^(1./2))./2;
		1./2.*sign(0).*0;
		1./2.*sign(2.*sin(q(13,:))).*2.^(1./2).*(1 - cos(q(13,:))).^(1./2);
		1./2.*sign(0).*0];
end
function M = w_J_CoM(in1)
%W_J_COM
%    M = W_J_COM(IN1)

%    This function was generated by the Symbolic Math Toolbox version 5.9.
%    06-May-2013 12:35:43

theta13 = in1(13,:);
M = [sin(theta13).*(7.0./2.0e2);0.0;cos(theta13).*(7.0./2.0e2);0.0;1.0;0.0];

end
function pose = CoM_T_RH (q)
pose=[	- (111.*cos(q(15,:)).*sin(q(14,:) - pi./2))./1000 - (171.*sin(q(17,:)).*(cos(q(16,:)).*cos(q(14,:) - pi./2) + sin(q(15,:)).*sin(q(16,:)).*sin(q(14,:) - pi./2)))./1000 - (171.*cos(q(15,:)).*cos(q(17,:)).*sin(q(14,:) - pi./2))./1000;
		(111.*sin(q(15,:)))./1000 + (171.*cos(q(17,:)).*sin(q(15,:)))./1000 - (171.*cos(q(15,:)).*sin(q(16,:)).*sin(q(17,:)))./1000 - 111./1000;
		(171.*sin(q(17,:)).*(cos(q(16,:)).*sin(q(14,:) - pi./2) - cos(q(14,:) - pi./2).*sin(q(15,:)).*sin(q(16,:))))./1000 - (111.*cos(q(15,:)).*cos(q(14,:) - pi./2))./1000 - (171.*cos(q(15,:)).*cos(q(17,:)).*cos(q(14,:) - pi./2))./1000 + 11./200;
		(cos(q(18,:)).*(cos(q(17,:)).*(cos(q(16,:)).*cos(q(14,:) - pi./2) + sin(q(15,:)).*sin(q(16,:)).*sin(q(14,:) - pi./2)) - cos(q(15,:)).*sin(q(17,:)).*sin(q(14,:) - pi./2)) - sin(q(18,:)).*(sin(q(15,:)).*sin(q(17,:)) + cos(q(15,:)).*cos(q(17,:)).*sin(q(16,:))) - sin(q(17,:)).*(cos(q(16,:)).*sin(q(14,:) - pi./2) - cos(q(14,:) - pi./2).*sin(q(15,:)).*sin(q(16,:))) - sin(q(18,:)).*(cos(q(14,:) - pi./2).*sin(q(16,:)) - cos(q(16,:)).*sin(q(15,:)).*sin(q(14,:) - pi./2)) + cos(q(15,:)).*cos(q(16,:)).*cos(q(18,:)) + cos(q(15,:)).*cos(q(17,:)).*cos(q(14,:) - pi./2) + 1).^(1./2)./2;
		1./2.*sign(cos(q(17,:)).*sin(q(15,:)) + sin(q(18,:)).*(cos(q(17,:)).*(cos(q(16,:)).*sin(q(14,:) - pi./2) - cos(q(14,:) - pi./2).*sin(q(15,:)).*sin(q(16,:))) + cos(q(15,:)).*cos(q(14,:) - pi./2).*sin(q(17,:))) + cos(q(18,:)).*(sin(q(16,:)).*sin(q(14,:) - pi./2) + cos(q(16,:)).*cos(q(14,:) - pi./2).*sin(q(15,:))) - cos(q(15,:)).*sin(q(16,:)).*sin(q(17,:))).*(cos(q(18,:)).*(cos(q(17,:)).*(cos(q(16,:)).*cos(q(14,:) - pi./2) + sin(q(15,:)).*sin(q(16,:)).*sin(q(14,:) - pi./2)) - cos(q(15,:)).*sin(q(17,:)).*sin(q(14,:) - pi./2)) + sin(q(18,:)).*(sin(q(15,:)).*sin(q(17,:)) + cos(q(15,:)).*cos(q(17,:)).*sin(q(16,:))) + sin(q(17,:)).*(cos(q(16,:)).*sin(q(14,:) - pi./2) - cos(q(14,:) - pi./2).*sin(q(15,:)).*sin(q(16,:))) - sin(q(18,:)).*(cos(q(14,:) - pi./2).*sin(q(16,:)) - cos(q(16,:)).*sin(q(15,:)).*sin(q(14,:) - pi./2)) - cos(q(15,:)).*cos(q(16,:)).*cos(q(18,:)) - cos(q(15,:)).*cos(q(17,:)).*cos(q(14,:) - pi./2) + 1).^(1./2);
		1./2.*sign(cos(q(18,:)).*(cos(q(17,:)).*(cos(q(16,:)).*sin(q(14,:) - pi./2) - cos(q(14,:) - pi./2).*sin(q(15,:)).*sin(q(16,:))) + cos(q(15,:)).*cos(q(14,:) - pi./2).*sin(q(17,:))) + sin(q(17,:)).*(cos(q(16,:)).*cos(q(14,:) - pi./2) + sin(q(15,:)).*sin(q(16,:)).*sin(q(14,:) - pi./2)) - sin(q(18,:)).*(sin(q(16,:)).*sin(q(14,:) - pi./2) + cos(q(16,:)).*cos(q(14,:) - pi./2).*sin(q(15,:))) + cos(q(15,:)).*cos(q(17,:)).*sin(q(14,:) - pi./2)).*(sin(q(17,:)).*(cos(q(16,:)).*sin(q(14,:) - pi./2) - cos(q(14,:) - pi./2).*sin(q(15,:)).*sin(q(16,:))) - sin(q(18,:)).*(sin(q(15,:)).*sin(q(17,:)) + cos(q(15,:)).*cos(q(17,:)).*sin(q(16,:))) - cos(q(18,:)).*(cos(q(17,:)).*(cos(q(16,:)).*cos(q(14,:) - pi./2) + sin(q(15,:)).*sin(q(16,:)).*sin(q(14,:) - pi./2)) - cos(q(15,:)).*sin(q(17,:)).*sin(q(14,:) - pi./2)) + sin(q(18,:)).*(cos(q(14,:) - pi./2).*sin(q(16,:)) - cos(q(16,:)).*sin(q(15,:)).*sin(q(14,:) - pi./2)) + cos(q(15,:)).*cos(q(16,:)).*cos(q(18,:)) - cos(q(15,:)).*cos(q(17,:)).*cos(q(14,:) - pi./2) + 1).^(1./2);
		1./2.*sign(sin(q(18,:)).*(cos(q(17,:)).*(cos(q(16,:)).*cos(q(14,:) - pi./2) + sin(q(15,:)).*sin(q(16,:)).*sin(q(14,:) - pi./2)) - cos(q(15,:)).*sin(q(17,:)).*sin(q(14,:) - pi./2)) + cos(q(18,:)).*(sin(q(15,:)).*sin(q(17,:)) + cos(q(15,:)).*cos(q(17,:)).*sin(q(16,:))) + cos(q(18,:)).*(cos(q(14,:) - pi./2).*sin(q(16,:)) - cos(q(16,:)).*sin(q(15,:)).*sin(q(14,:) - pi./2)) + cos(q(15,:)).*cos(q(16,:)).*sin(q(18,:))).*(sin(q(18,:)).*(sin(q(15,:)).*sin(q(17,:)) + cos(q(15,:)).*cos(q(17,:)).*sin(q(16,:))) - cos(q(18,:)).*(cos(q(17,:)).*(cos(q(16,:)).*cos(q(14,:) - pi./2) + sin(q(15,:)).*sin(q(16,:)).*sin(q(14,:) - pi./2)) - cos(q(15,:)).*sin(q(17,:)).*sin(q(14,:) - pi./2)) - sin(q(17,:)).*(cos(q(16,:)).*sin(q(14,:) - pi./2) - cos(q(14,:) - pi./2).*sin(q(15,:)).*sin(q(16,:))) + sin(q(18,:)).*(cos(q(14,:) - pi./2).*sin(q(16,:)) - cos(q(16,:)).*sin(q(15,:)).*sin(q(14,:) - pi./2)) - cos(q(15,:)).*cos(q(16,:)).*cos(q(18,:)) + cos(q(15,:)).*cos(q(17,:)).*cos(q(14,:) - pi./2) + 1).^(1./2)];
end
function M = CoM_J_RH(in1)
%COM_J_RH
%    M = COM_J_RH(IN1)

%    This function was generated by the Symbolic Math Toolbox version 5.9.
%    06-May-2013 12:35:43

theta14 = in1(14,:);
theta15 = in1(15,:);
theta16 = in1(16,:);
theta17 = in1(17,:);
t3 = pi.*(1.0./2.0);
t2 = -t3+theta14;
t4 = cos(t2);
t5 = cos(theta15);
t6 = sin(t2);
t7 = sin(theta15);
t8 = cos(theta17);
t9 = sin(theta16);
t10 = sin(theta17);
t11 = cos(theta16);
t12 = t7.*(1.11e2./1.0e3);
t13 = t7.*t8.*(1.71e2./1.0e3);
t14 = t12+t13-t5.*t9.*t10.*(1.71e2./1.0e3);
t15 = t4.*t9;
t16 = t4.*t11;
t17 = t6.*t7.*t9;
t18 = t16+t17;
t19 = t6.*t9;
t20 = t4.*t7.*t11;
t21 = t19+t20;
t22 = t6.*t11;
t23 = t22-t4.*t7.*t9;
M = reshape([t4.*t5.*(-1.11e2./1.0e3)+t10.*t23.*(1.71e2./1.0e3)-t4.*t5.*t8.*(1.71e2./1.0e3),0.0,t5.*t6.*(1.11e2./1.0e3)+t10.*t18.*(1.71e2./1.0e3)+t5.*t6.*t8.*(1.71e2./1.0e3),0.0,1.0,0.0,t6.*t14,t5.*(1.11e2./1.0e3)+t5.*t8.*(1.71e2./1.0e3)+t7.*t9.*t10.*(1.71e2./1.0e3),t4.*t14,t4,0.0,-t6,t10.*(t15-t6.*t7.*t11).*(1.71e2./1.0e3),t5.*t10.*t11.*(-1.71e2./1.0e3),t10.*t21.*(-1.71e2./1.0e3),t5.*t6,-t7,t4.*t5,t5.*t6.*t10.*(1.71e2./1.0e3)-t4.*t8.*t11.*(1.71e2./1.0e3)-t6.*t7.*t8.*t9.*(1.71e2./1.0e3),t7.*t10.*(-1.71e2./1.0e3)-t5.*t8.*t9.*(1.71e2./1.0e3),t4.*t5.*t10.*(1.71e2./1.0e3)+t6.*t8.*t11.*(1.71e2./1.0e3)-t4.*t7.*t8.*t9.*(1.71e2./1.0e3),-t15+t6.*t7.*t11,t5.*t11,t21,0.0,0.0,0.0,t10.*t18+t5.*t6.*t8,-t7.*t8+t5.*t9.*t10,-t10.*t23+t4.*t5.*t8],[6, 5]);

end
function pose = CoM_T_LH (q)
pose=[	- (111.*cos(q(20,:)).*sin(q(19,:) - pi./2))./1000 - (171.*sin(q(22,:)).*(cos(q(21,:)).*cos(q(19,:) - pi./2) + sin(q(20,:)).*sin(q(21,:)).*sin(q(19,:) - pi./2)))./1000 - (171.*cos(q(20,:)).*cos(q(22,:)).*sin(q(19,:) - pi./2))./1000;
		(111.*sin(q(20,:)))./1000 + (171.*cos(q(22,:)).*sin(q(20,:)))./1000 - (171.*cos(q(20,:)).*sin(q(21,:)).*sin(q(22,:)))./1000 + 111./1000;
		(171.*sin(q(22,:)).*(cos(q(21,:)).*sin(q(19,:) - pi./2) - cos(q(19,:) - pi./2).*sin(q(20,:)).*sin(q(21,:))))./1000 - (111.*cos(q(20,:)).*cos(q(19,:) - pi./2))./1000 - (171.*cos(q(20,:)).*cos(q(22,:)).*cos(q(19,:) - pi./2))./1000 + 11./200;
		(cos(q(23,:)).*(cos(q(22,:)).*(cos(q(21,:)).*cos(q(19,:) - pi./2) + sin(q(20,:)).*sin(q(21,:)).*sin(q(19,:) - pi./2)) - cos(q(20,:)).*sin(q(22,:)).*sin(q(19,:) - pi./2)) - sin(q(23,:)).*(sin(q(20,:)).*sin(q(22,:)) + cos(q(20,:)).*cos(q(22,:)).*sin(q(21,:))) - sin(q(22,:)).*(cos(q(21,:)).*sin(q(19,:) - pi./2) - cos(q(19,:) - pi./2).*sin(q(20,:)).*sin(q(21,:))) - sin(q(23,:)).*(cos(q(19,:) - pi./2).*sin(q(21,:)) - cos(q(21,:)).*sin(q(20,:)).*sin(q(19,:) - pi./2)) + cos(q(20,:)).*cos(q(21,:)).*cos(q(23,:)) + cos(q(20,:)).*cos(q(22,:)).*cos(q(19,:) - pi./2) + 1).^(1./2)./2;
		1./2.*sign(cos(q(22,:)).*sin(q(20,:)) + sin(q(23,:)).*(cos(q(22,:)).*(cos(q(21,:)).*sin(q(19,:) - pi./2) - cos(q(19,:) - pi./2).*sin(q(20,:)).*sin(q(21,:))) + cos(q(20,:)).*cos(q(19,:) - pi./2).*sin(q(22,:))) + cos(q(23,:)).*(sin(q(21,:)).*sin(q(19,:) - pi./2) + cos(q(21,:)).*cos(q(19,:) - pi./2).*sin(q(20,:))) - cos(q(20,:)).*sin(q(21,:)).*sin(q(22,:))).*(cos(q(23,:)).*(cos(q(22,:)).*(cos(q(21,:)).*cos(q(19,:) - pi./2) + sin(q(20,:)).*sin(q(21,:)).*sin(q(19,:) - pi./2)) - cos(q(20,:)).*sin(q(22,:)).*sin(q(19,:) - pi./2)) + sin(q(23,:)).*(sin(q(20,:)).*sin(q(22,:)) + cos(q(20,:)).*cos(q(22,:)).*sin(q(21,:))) + sin(q(22,:)).*(cos(q(21,:)).*sin(q(19,:) - pi./2) - cos(q(19,:) - pi./2).*sin(q(20,:)).*sin(q(21,:))) - sin(q(23,:)).*(cos(q(19,:) - pi./2).*sin(q(21,:)) - cos(q(21,:)).*sin(q(20,:)).*sin(q(19,:) - pi./2)) - cos(q(20,:)).*cos(q(21,:)).*cos(q(23,:)) - cos(q(20,:)).*cos(q(22,:)).*cos(q(19,:) - pi./2) + 1).^(1./2);
		1./2.*sign(cos(q(23,:)).*(cos(q(22,:)).*(cos(q(21,:)).*sin(q(19,:) - pi./2) - cos(q(19,:) - pi./2).*sin(q(20,:)).*sin(q(21,:))) + cos(q(20,:)).*cos(q(19,:) - pi./2).*sin(q(22,:))) + sin(q(22,:)).*(cos(q(21,:)).*cos(q(19,:) - pi./2) + sin(q(20,:)).*sin(q(21,:)).*sin(q(19,:) - pi./2)) - sin(q(23,:)).*(sin(q(21,:)).*sin(q(19,:) - pi./2) + cos(q(21,:)).*cos(q(19,:) - pi./2).*sin(q(20,:))) + cos(q(20,:)).*cos(q(22,:)).*sin(q(19,:) - pi./2)).*(sin(q(22,:)).*(cos(q(21,:)).*sin(q(19,:) - pi./2) - cos(q(19,:) - pi./2).*sin(q(20,:)).*sin(q(21,:))) - sin(q(23,:)).*(sin(q(20,:)).*sin(q(22,:)) + cos(q(20,:)).*cos(q(22,:)).*sin(q(21,:))) - cos(q(23,:)).*(cos(q(22,:)).*(cos(q(21,:)).*cos(q(19,:) - pi./2) + sin(q(20,:)).*sin(q(21,:)).*sin(q(19,:) - pi./2)) - cos(q(20,:)).*sin(q(22,:)).*sin(q(19,:) - pi./2)) + sin(q(23,:)).*(cos(q(19,:) - pi./2).*sin(q(21,:)) - cos(q(21,:)).*sin(q(20,:)).*sin(q(19,:) - pi./2)) + cos(q(20,:)).*cos(q(21,:)).*cos(q(23,:)) - cos(q(20,:)).*cos(q(22,:)).*cos(q(19,:) - pi./2) + 1).^(1./2);
		1./2.*sign(sin(q(23,:)).*(cos(q(22,:)).*(cos(q(21,:)).*cos(q(19,:) - pi./2) + sin(q(20,:)).*sin(q(21,:)).*sin(q(19,:) - pi./2)) - cos(q(20,:)).*sin(q(22,:)).*sin(q(19,:) - pi./2)) + cos(q(23,:)).*(sin(q(20,:)).*sin(q(22,:)) + cos(q(20,:)).*cos(q(22,:)).*sin(q(21,:))) + cos(q(23,:)).*(cos(q(19,:) - pi./2).*sin(q(21,:)) - cos(q(21,:)).*sin(q(20,:)).*sin(q(19,:) - pi./2)) + cos(q(20,:)).*cos(q(21,:)).*sin(q(23,:))).*(sin(q(23,:)).*(sin(q(20,:)).*sin(q(22,:)) + cos(q(20,:)).*cos(q(22,:)).*sin(q(21,:))) - cos(q(23,:)).*(cos(q(22,:)).*(cos(q(21,:)).*cos(q(19,:) - pi./2) + sin(q(20,:)).*sin(q(21,:)).*sin(q(19,:) - pi./2)) - cos(q(20,:)).*sin(q(22,:)).*sin(q(19,:) - pi./2)) - sin(q(22,:)).*(cos(q(21,:)).*sin(q(19,:) - pi./2) - cos(q(19,:) - pi./2).*sin(q(20,:)).*sin(q(21,:))) + sin(q(23,:)).*(cos(q(19,:) - pi./2).*sin(q(21,:)) - cos(q(21,:)).*sin(q(20,:)).*sin(q(19,:) - pi./2)) - cos(q(20,:)).*cos(q(21,:)).*cos(q(23,:)) + cos(q(20,:)).*cos(q(22,:)).*cos(q(19,:) - pi./2) + 1).^(1./2)];
end
function M = CoM_J_LH(in1)
%COM_J_LH
%    M = COM_J_LH(IN1)

%    This function was generated by the Symbolic Math Toolbox version 5.9.
%    06-May-2013 12:35:43

theta19 = in1(19,:);
theta20 = in1(20,:);
theta21 = in1(21,:);
theta22 = in1(22,:);
t3 = pi.*(1.0./2.0);
t2 = -t3+theta19;
t4 = cos(t2);
t5 = cos(theta20);
t6 = sin(t2);
t7 = sin(theta20);
t8 = cos(theta22);
t9 = sin(theta21);
t10 = sin(theta22);
t11 = cos(theta21);
t12 = t7.*(1.11e2./1.0e3);
t13 = t7.*t8.*(1.71e2./1.0e3);
t14 = t12+t13-t5.*t9.*t10.*(1.71e2./1.0e3);
t15 = t4.*t9;
t16 = t4.*t11;
t17 = t6.*t7.*t9;
t18 = t16+t17;
t19 = t6.*t9;
t20 = t4.*t7.*t11;
t21 = t19+t20;
t22 = t6.*t11;
t23 = t22-t4.*t7.*t9;
M = reshape([t4.*t5.*(-1.11e2./1.0e3)+t10.*t23.*(1.71e2./1.0e3)-t4.*t5.*t8.*(1.71e2./1.0e3),0.0,t5.*t6.*(1.11e2./1.0e3)+t10.*t18.*(1.71e2./1.0e3)+t5.*t6.*t8.*(1.71e2./1.0e3),0.0,1.0,0.0,t6.*t14,t5.*(1.11e2./1.0e3)+t5.*t8.*(1.71e2./1.0e3)+t7.*t9.*t10.*(1.71e2./1.0e3),t4.*t14,t4,0.0,-t6,t10.*(t15-t6.*t7.*t11).*(1.71e2./1.0e3),t5.*t10.*t11.*(-1.71e2./1.0e3),t10.*t21.*(-1.71e2./1.0e3),t5.*t6,-t7,t4.*t5,t5.*t6.*t10.*(1.71e2./1.0e3)-t4.*t8.*t11.*(1.71e2./1.0e3)-t6.*t7.*t8.*t9.*(1.71e2./1.0e3),t7.*t10.*(-1.71e2./1.0e3)-t5.*t8.*t9.*(1.71e2./1.0e3),t4.*t5.*t10.*(1.71e2./1.0e3)+t6.*t8.*t11.*(1.71e2./1.0e3)-t4.*t7.*t8.*t9.*(1.71e2./1.0e3),-t15+t6.*t7.*t11,t5.*t11,t21,0.0,0.0,0.0,t10.*t18+t5.*t6.*t8,-t7.*t8+t5.*t9.*t10,-t10.*t23+t4.*t5.*t8],[6, 5]);

end
function pose = RF_T_CoM (q)
pose=[	(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - (21.*sin(q(5,:)))./200 - (21.*sin(q(4,:) + q(5,:)))./200 + (39.*cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)))./1000 - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(2,:)))./1000;
		sin(q(6,:)).*((21.*cos(q(4,:) + q(5,:)))./200 + (21.*cos(q(5,:)))./200) - (sin(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(6,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) + (39.*cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))))./1000 + (cos(q(6,:)).*sin(q(2,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)))./1000;
		(21.*cos(q(6,:)).*(cos(q(4,:) + q(5,:)) + cos(q(5,:))))./200 + (sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - (39.*cos(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))))./1000 - (sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(1,:)))./1000 + 1./25;
		(cos(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) + sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))) + cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - cos(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(13,:)) + sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2)./2;
		1./2.*sign(sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(6,:))) - cos(q(13,:)).*(cos(q(6,:)).*sin(q(2,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:))) - cos(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(1,:))).*(cos(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) - sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))) - cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) + cos(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(13,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2);
		1./2.*sign(sin(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) - sin(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))) - cos(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(13,:))).*(cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))) - cos(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) + cos(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(13,:)) + sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2);
		1./2.*sign(- sin(q(13,:)).*(cos(q(6,:)).*sin(q(2,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:))) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)) - cos(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(2,:))).*(sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))) - cos(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) - cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - cos(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(13,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2)];
end
function M = RF_J_CoM(in1)
%RF_J_COM
%    M = RF_J_COM(IN1)

%    This function was generated by the Symbolic Math Toolbox version 5.9.
%    06-May-2013 12:35:44

theta01 = in1(1,:);
theta02 = in1(2,:);
theta03 = in1(3,:);
theta04 = in1(4,:);
theta05 = in1(5,:);
theta06 = in1(6,:);
theta13 = in1(13,:);
t2 = theta03+theta04+theta05;
t3 = sin(t2);
t4 = cos(theta01);
t5 = sin(theta01);
t6 = cos(t2);
t7 = sin(theta02);
t8 = t4.*t6.*t7.*(3.9e1./1.0e3);
t9 = theta04+theta05;
t10 = cos(t9);
t11 = cos(theta02);
t12 = sin(theta06);
t13 = cos(theta06);
t14 = t5.*t6.*(3.9e1./1.0e3);
t15 = t3.*t4.*t7.*(3.9e1./1.0e3);
t16 = sin(t9);
t17 = cos(theta05);
t18 = t14+t15;
t20 = t16.*(2.1e1./2.0e2);
t19 = t14+t15-t20;
t21 = sin(theta05);
t22 = t7.*t13;
t23 = t6.*t11.*t12;
t24 = t7.*t12;
t25 = t24-t6.*t11.*t13;
M = reshape([t4.*t6.*(3.9e1./1.0e3)-t3.*t5.*t7.*(3.9e1./1.0e3),t3.*t4.*t12.*(3.9e1./1.0e3)-t5.*t11.*t13.*(3.9e1./1.0e3)+t5.*t6.*t7.*t12.*(3.9e1./1.0e3),t3.*t4.*t13.*(3.9e1./1.0e3)+t5.*t11.*t12.*(3.9e1./1.0e3)+t5.*t6.*t7.*t13.*(3.9e1./1.0e3),t3.*t11,-t22-t23,t25,t3.*t4.*t11.*(3.9e1./1.0e3),t4.*(t22+t23).*(-3.9e1./1.0e3),t4.*t25.*(3.9e1./1.0e3),-t6,-t3.*t12,-t3.*t13,t8-t3.*t5.*(3.9e1./1.0e3),t12.*t18,t13.*t18,0.0,-t13,t12,t8-t10.*(2.1e1./2.0e2)-t3.*t5.*(3.9e1./1.0e3),t12.*t19,t13.*t19,0.0,-t13,t12,t8-t10.*(2.1e1./2.0e2)-t17.*(2.1e1./2.0e2)-t3.*t5.*(3.9e1./1.0e3),t12.*(t14+t15-t16.*(2.1e1./2.0e2)-t21.*(2.1e1./2.0e2)),t13.*(t14+t15-t20-t21.*(2.1e1./2.0e2)),0.0,-t13,t12,0.0,t13.*(t10+t17).*(2.1e1./2.0e2)-t4.*(t11.*t12+t6.*t7.*t13).*(3.9e1./1.0e3)+t3.*t5.*t13.*(3.9e1./1.0e3),t4.*(t11.*t13-t6.*t7.*t12).*(-3.9e1./1.0e3)-t12.*(t10.*(2.1e1./2.0e2)+t17.*(2.1e1./2.0e2))-t3.*t5.*t12.*(3.9e1./1.0e3),-1.0,0.0,0.0,sin(theta13).*(7.0./2.0e2),0.0,cos(theta13).*(7.0./2.0e2),0.0,1.0,0.0],[6, 7]);

end
function pose = LF_T_CoM (q)
pose=[	(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - (21.*sin(q(11,:)))./200 - (21.*sin(q(10,:) + q(11,:)))./200 - (39.*cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)))./1000 - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) - (39.*sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(8,:)))./1000;
		sin(q(12,:)).*((21.*cos(q(10,:) + q(11,:)))./200 + (21.*cos(q(11,:)))./200) - (sin(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(12,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - (39.*cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))))./1000 + (cos(q(12,:)).*sin(q(8,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) - (39.*sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)))./1000;
		(21.*cos(q(12,:)).*(cos(q(10,:) + q(11,:)) + cos(q(11,:))))./200 + (sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) + (39.*cos(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))))./1000 - (sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) - (39.*sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(7,:)))./1000 + 1./25;
		(cos(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) + sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))) + cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - cos(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(13,:)) + sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2)./2;
		1./2.*sign(sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(12,:))) - cos(q(13,:)).*(cos(q(12,:)).*sin(q(8,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:))) - cos(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(7,:))).*(cos(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) - sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))) - cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) + cos(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(13,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2);
		1./2.*sign(sin(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) - sin(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))) - cos(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(13,:))).*(cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))) - cos(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) + cos(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(13,:)) + sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2);
		1./2.*sign(- sin(q(13,:)).*(cos(q(12,:)).*sin(q(8,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:))) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)) - cos(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(8,:))).*(sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))) - cos(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) - cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - cos(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(13,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2)];
end
function M = LF_J_CoM(in1)
%LF_J_COM
%    M = LF_J_COM(IN1)

%    This function was generated by the Symbolic Math Toolbox version 5.9.
%    06-May-2013 12:35:44

theta07 = in1(7,:);
theta08 = in1(8,:);
theta09 = in1(9,:);
theta10 = in1(10,:);
theta11 = in1(11,:);
theta12 = in1(12,:);
theta13 = in1(13,:);
t2 = theta09+theta10+theta11;
t3 = sin(t2);
t4 = cos(theta07);
t5 = sin(theta07);
t6 = cos(t2);
t7 = sin(theta08);
t8 = t3.*t5.*(3.9e1./1.0e3);
t9 = theta10+theta11;
t10 = cos(t9);
t11 = cos(theta08);
t12 = sin(theta12);
t13 = cos(theta12);
t14 = t5.*t6.*(3.9e1./1.0e3);
t15 = t3.*t4.*t7.*(3.9e1./1.0e3);
t16 = sin(t9);
t17 = t16.*(2.1e1./2.0e2);
t18 = cos(theta11);
t19 = t14+t15;
t20 = t14+t15+t17;
t21 = sin(theta11);
t22 = t21.*(2.1e1./2.0e2);
t23 = t14+t15+t17+t22;
t24 = t7.*t13;
t25 = t6.*t11.*t12;
t26 = t7.*t12;
t27 = t26-t6.*t11.*t13;
M = reshape([t4.*t6.*(-3.9e1./1.0e3)+t3.*t5.*t7.*(3.9e1./1.0e3),t3.*t4.*t12.*(-3.9e1./1.0e3)+t5.*t11.*t13.*(3.9e1./1.0e3)-t5.*t6.*t7.*t12.*(3.9e1./1.0e3),t3.*t4.*t13.*(-3.9e1./1.0e3)-t5.*t11.*t12.*(3.9e1./1.0e3)-t5.*t6.*t7.*t13.*(3.9e1./1.0e3),t3.*t11,-t24-t25,t27,t3.*t4.*t11.*(-3.9e1./1.0e3),t4.*(t24+t25).*(3.9e1./1.0e3),t4.*t27.*(-3.9e1./1.0e3),-t6,-t3.*t12,-t3.*t13,t8-t4.*t6.*t7.*(3.9e1./1.0e3),-t12.*t19,-t13.*t19,0.0,-t13,t12,t8-t10.*(2.1e1./2.0e2)-t4.*t6.*t7.*(3.9e1./1.0e3),-t12.*t20,-t13.*t20,0.0,-t13,t12,t8-t10.*(2.1e1./2.0e2)-t18.*(2.1e1./2.0e2)-t4.*t6.*t7.*(3.9e1./1.0e3),-t12.*t23,-t13.*t23,0.0,-t13,t12,0.0,t13.*(t10+t18).*(2.1e1./2.0e2)+t4.*(t11.*t12+t6.*t7.*t13).*(3.9e1./1.0e3)-t3.*t5.*t13.*(3.9e1./1.0e3),t4.*(t11.*t13-t6.*t7.*t12).*(3.9e1./1.0e3)-t12.*(t10.*(2.1e1./2.0e2)+t18.*(2.1e1./2.0e2))+t3.*t5.*t12.*(3.9e1./1.0e3),-1.0,0.0,0.0,sin(theta13).*(7.0./2.0e2),0.0,cos(theta13).*(7.0./2.0e2),0.0,1.0,0.0],[6, 7]);

end
function pose = CoM_T_RF (q)
pose=[	(sin(q(13,:)).*(cos(q(6,:)).*sin(q(2,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:))) + cos(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(6,:)))).*(sin(q(6,:)).*((21.*cos(q(4,:) + q(5,:)))./200 + (21.*cos(q(5,:)))./200) - (sin(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(6,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) + (39.*cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))))./1000 + (cos(q(6,:)).*sin(q(2,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)))./1000) - (sin(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))) + cos(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:)))).*((21.*cos(q(6,:)).*(cos(q(4,:) + q(5,:)) + cos(q(5,:))))./200 + (sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - (39.*cos(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))))./1000 - (sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(1,:)))./1000 + 1./25) + (cos(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(13,:))).*((21.*sin(q(4,:) + q(5,:)))./200 + (21.*sin(q(5,:)))./200 - (cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - (39.*cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)))./1000 + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) - (39.*sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(2,:)))./1000);
		(cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(2,:))).*((21.*sin(q(4,:) + q(5,:)))./200 + (21.*sin(q(5,:)))./200 - (cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - (39.*cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)))./1000 + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) - (39.*sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(2,:)))./1000) - (cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:))).*(sin(q(6,:)).*((21.*cos(q(4,:) + q(5,:)))./200 + (21.*cos(q(5,:)))./200) - (sin(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(6,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) + (39.*cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))))./1000 + (cos(q(6,:)).*sin(q(2,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)))./1000) + (cos(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(1,:))).*((21.*cos(q(6,:)).*(cos(q(4,:) + q(5,:)) + cos(q(5,:))))./200 + (sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - (39.*cos(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))))./1000 - (sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(1,:)))./1000 + 1./25);
		(sin(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(13,:))).*((21.*sin(q(4,:) + q(5,:)))./200 + (21.*sin(q(5,:)))./200 - (cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - (39.*cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)))./1000 + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) - (39.*sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(2,:)))./1000) - (sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))) - cos(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:)))).*((21.*cos(q(6,:)).*(cos(q(4,:) + q(5,:)) + cos(q(5,:))))./200 + (sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - (39.*cos(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))))./1000 - (sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(1,:)))./1000 + 1./25) - (cos(q(13,:)).*(cos(q(6,:)).*sin(q(2,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:))) - sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(6,:)))).*(sin(q(6,:)).*((21.*cos(q(4,:) + q(5,:)))./200 + (21.*cos(q(5,:)))./200) - (sin(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(6,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) + (39.*cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))))./1000 + (cos(q(6,:)).*sin(q(2,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)))./1000);
		(cos(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) + sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))) + cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - cos(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(13,:)) + sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2)./2;
		1./2.*sign(cos(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + cos(q(13,:)).*(cos(q(6,:)).*sin(q(2,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:))) - sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(1,:))).*(cos(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) - sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))) - cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) + cos(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(13,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2);
		1./2.*sign(sin(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))) - sin(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) + cos(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(13,:))).*(cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))) - cos(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) + cos(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(13,:)) + sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2);
		1./2.*sign(sin(q(13,:)).*(cos(q(6,:)).*sin(q(2,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(6,:))) + cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)) + cos(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(6,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*sin(q(2,:))).*(sin(q(13,:)).*(sin(q(1,:)).*(cos(q(2,:)).*sin(q(6,:)) + cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(6,:)).*sin(q(2,:))) + sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)).*cos(q(6,:))) - cos(q(13,:)).*(cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(1,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(2,:))) - cos(q(1,:)).*(cos(q(2,:)).*cos(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*sin(q(2,:)).*sin(q(6,:))) - cos(q(13,:)).*(sin(q(2,:)).*sin(q(6,:)) - cos(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*cos(q(6,:))) - sin(q(3,:) + q(4,:) + q(5,:)).*cos(q(2,:)).*sin(q(13,:)) - sin(q(3,:) + q(4,:) + q(5,:)).*sin(q(1,:)).*sin(q(6,:)) + 1).^(1./2)];
end
function pose = CoM_T_LF (q)
pose=[	(cos(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(13,:))).*((21.*sin(q(10,:) + q(11,:)))./200 + (21.*sin(q(11,:)))./200 - (cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) + (39.*cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)))./1000 + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(8,:)))./1000) - (sin(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))) + cos(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:)))).*((21.*cos(q(12,:)).*(cos(q(10,:) + q(11,:)) + cos(q(11,:))))./200 + (sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) + (39.*cos(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))))./1000 - (sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) - (39.*sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(7,:)))./1000 + 1./25) - (sin(q(13,:)).*(cos(q(12,:)).*sin(q(8,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:))) + cos(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(12,:)))).*((sin(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(12,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - sin(q(12,:)).*((21.*cos(q(10,:) + q(11,:)))./200 + (21.*cos(q(11,:)))./200) + (39.*cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))))./1000 - (cos(q(12,:)).*sin(q(8,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)))./1000);
		(cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(8,:))).*((21.*sin(q(10,:) + q(11,:)))./200 + (21.*sin(q(11,:)))./200 - (cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) + (39.*cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)))./1000 + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(8,:)))./1000) + (cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:))).*((sin(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(12,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - sin(q(12,:)).*((21.*cos(q(10,:) + q(11,:)))./200 + (21.*cos(q(11,:)))./200) + (39.*cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))))./1000 - (cos(q(12,:)).*sin(q(8,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)))./1000) + (cos(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(7,:))).*((21.*cos(q(12,:)).*(cos(q(10,:) + q(11,:)) + cos(q(11,:))))./200 + (sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) + (39.*cos(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))))./1000 - (sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) - (39.*sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(7,:)))./1000 + 1./25);
		(cos(q(13,:)).*(cos(q(12,:)).*sin(q(8,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:))) - sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(12,:)))).*((sin(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(12,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) - sin(q(12,:)).*((21.*cos(q(10,:) + q(11,:)))./200 + (21.*cos(q(11,:)))./200) + (39.*cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))))./1000 - (cos(q(12,:)).*sin(q(8,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)))./1000) - (sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))) - cos(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:)))).*((21.*cos(q(12,:)).*(cos(q(10,:) + q(11,:)) + cos(q(11,:))))./200 + (sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) + (39.*cos(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))))./1000 - (sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) - (39.*sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(7,:)))./1000 + 1./25) + (sin(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(13,:))).*((21.*sin(q(10,:) + q(11,:)))./200 + (21.*sin(q(11,:)))./200 - (cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))).*((7.*sin(q(13,:)))./100 - (7.*cos(q(13,:)))./200 + 7./200) + (39.*cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)))./1000 + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*((7.*cos(q(13,:)))./100 + (7.*sin(q(13,:)))./200 + 11./200) + (39.*sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(8,:)))./1000);
		(cos(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) + sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))) + cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - cos(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(13,:)) + sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2)./2;
		1./2.*sign(cos(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + cos(q(13,:)).*(cos(q(12,:)).*sin(q(8,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:))) - sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(7,:))).*(cos(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) - sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))) - cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) + cos(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(13,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2);
		1./2.*sign(sin(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))) - sin(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) + cos(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(13,:))).*(cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))) - cos(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) + cos(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(13,:)) + sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2);
		1./2.*sign(sin(q(13,:)).*(cos(q(12,:)).*sin(q(8,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(12,:))) + cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)) + cos(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(12,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*sin(q(8,:))).*(sin(q(13,:)).*(sin(q(7,:)).*(cos(q(8,:)).*sin(q(12,:)) + cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(12,:)).*sin(q(8,:))) + sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)).*cos(q(12,:))) - cos(q(13,:)).*(cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(7,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(8,:))) - cos(q(7,:)).*(cos(q(8,:)).*cos(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*sin(q(8,:)).*sin(q(12,:))) - cos(q(13,:)).*(sin(q(8,:)).*sin(q(12,:)) - cos(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*cos(q(12,:))) - sin(q(9,:) + q(10,:) + q(11,:)).*cos(q(8,:)).*sin(q(13,:)) - sin(q(9,:) + q(10,:) + q(11,:)).*sin(q(7,:)).*sin(q(12,:)) + 1).^(1./2)];
end